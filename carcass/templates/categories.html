{% extends "base.html" %}


{% block title %}
    <title>Category</title>
{% endblock %}

{% block body %}
    <div class="container">
        <h5>Add category</h5>
        <form class="form-control-sm" method="POST" action="/categories">
            {{ form.hidden_tag() }}
            {% for field in form if field.name not in ['csrf_token', 'submit'] %}
                {{ field.label() }}
                {% if field.errors %}
                    {{ field(class='invalid') }}
                    <span class="alert-danger">
                {% for e in field.errors %}
                    {{ e }}
                {% endfor %}
            </span>
                {% else %}
                    {{ field }}
                {% endif %}
                <br><br>
            {% endfor %}
            <p>{{ form.submit(class='btn btn-outline-success') }}</p>
        </form>
    </div>
    <br>
    <br>
     {% if categories %}
        <table class="table">
              <thead>
                  <tr>
                      <th>Название</th>
                      <th>ID</th>
                      <th>Действии</th>
                      <th></th>
                  </tr>
              </thead>
            {% for cat in categories %}
              <tbody>
              <tr>
                  <td>{{ cat.name }}</td>
                  <td>{{ cat.id }}</td>
                  <td><a href="/delete_category/{{ cat.id }}" class="btn btn-secondary">Удалить</a> </td>
                  <td><a href="/cat_update/{{ cat.id }}" class="btn btn-secondary">Изменить</a> </td>
              </tr>
            </tbody>
            {% endfor %}
            {% else %}
            <h3>Пока нет категории</h3>
        {% endif %}
        </table>
    </div>
{% endblock %}